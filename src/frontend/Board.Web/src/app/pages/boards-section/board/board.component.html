<div class="board-container">
  <div class="board-header">
    <div class="board-title d-flex">
      <i class="material-icons icon me-2 settings-icon" *ngIf="isBoardManager" (click)="openSettings()">settings</i>
      <h1 class="me-2">{{ currentBoard?.title || 'PROJECT TITLE' }}</h1>
    </div>

    <div class="board-stats">
      <div class="stat-item">
        <span class="stat-label">{{ 'BOARD.TOTAL_TASKS' | translate }}</span>
        <span class="stat-value">{{ getTaskCount() }}</span>
      </div>
    </div>
  </div>

  <div class="board-content">
    <div class="board-columns">
      <div *ngFor="let column of columns; trackBy: trackByColumnId; let i = index"
           class="column-drag-container"
           [class.drag-over]="draggedColumnIndex !== null && draggedColumnIndex !== i"
           [class.dragging]="draggedColumnIndex === i">

        <!-- Drag Handle -->
        <div class="column-drag-handle"
             *ngIf="isBoardManager"
             [draggable]="true"
             (dragover)="onColumnDragOver($event, i)"
             (dragenter)="onColumnDragEnter($event)"
             (dragstart)="onColumnDragStart($event, i)"
             (dragend)="onColumnDragEnd($event)"
             (drop)="onColumnDrop($event, i)"
             title="{{ 'BOARD.DRAG_TO_REORDER' | translate }}">
          <i class="material-icons">drag_indicator</i>
        </div>

        <app-board-column
          [boardColumnId]="column.id"
          [boardId]="currentBoardId ?? column.id"
          [allTasks]="tasks"
          [columnTasks]="getTasksByStatus(column.id)"

          (addTask)="onAddTask($event)"
          (editTask)="onEditTask($event)"
          (deleteTask)="onDeleteTask($event)"
          (moveTask)="onMoveTask($event)"
          (dropTask)="onDropTask($event)">
        </app-board-column>
      </div>
    </div>
  </div>
</div>
